flowchart TD
%% High-level spatial context engine overview

subgraph BOOTSTRAP["Bootstrap"]
  BOOT["bootstrap.json / static layouts"]
end

subgraph STORAGE["Scene Graph Core"]
  SG[(Scene Graph)]
  EV[(Event Log)]
end

subgraph AGENTS["Agentized Objects"]
  ACTORS["Spatial Agents"]
  LOM["Level of Mobility"]
end

PHYSICS["Physics & Placement"]
TOPO["Topological Tools"]
ORCH["Orchestrator"]
ARB["Arbitration"]
LLMCTX["LLM Context & Tools"]
SENSORS["Sensors / Apps"]

BOOT --> SG
SENSORS --> SG

SG <-->|"updates"| ORCH
ORCH --> ACTORS
ACTORS --> ORCH

ACTORS -->|"disputes"| ARB
ARB --> ORCH

ACTORS --> PHYSICS
PHYSICS --> SG

ACTORS --> TOPO
TOPO --> ACTORS

SG --> LLMCTX
LLMCTX --> ACTORS
LLMCTX --> ORCH

LOM --> ACTORS

classDef storage fill:#2b2b2b,stroke:#888,stroke-width:1,color:#fff;
classDef agents fill:#1e3a5f,stroke:#89b4fa,stroke-width:1,color:#fff;
classDef control fill:#2d3b20,stroke:#a6e3a1,stroke-width:1,color:#fff;
classDef compute fill:#243b2f,stroke:#a6e3a1,stroke-width:1,color:#fff;
classDef external fill:#24303b,stroke:#94e2d5,stroke-width:1,color:#fff;
class BOOT,BOOTSTRAP external
class SG,EV storage
class ACTORS,LOM agents
class ORCH,ARB control
class PHYSICS,TOPO compute
class LLMCTX external
class SENSORS external
